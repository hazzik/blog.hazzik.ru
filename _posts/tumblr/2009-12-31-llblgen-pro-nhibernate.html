---
layout: post
title: Причины перехода с LLBLGen Pro на NHibernate
date: '2009-12-31T18:34:00+13:00'
tags:
- llblgen
- nhibernate
- .NET
tumblr_url: http://blog.hazzik.ru/post/19465315908/llblgen-pro-nhibernate
redirect_from:
- /post/19465315908/llblgen-pro-nhibernate/
- /post/19465315908/
- /2009/12/llblgen-pro-nhibernate.html
---
<div><a href="http://www.byndyu.ru/">Мой коллега</a> уже описал <a href="http://blog.byndyu.ru/2009/12/llblgen-vs-nhibernate.html">пару причин</a>, почему мы постепенно отказываемся от <a href="http://www.llblgen.com/">LLBLGen Pro</a> в пользу <a href="http://nhforge.org/">NHibernate</a>. Хочу добавить свои 50 центов.</div><a name="more"></a><br/><div>Мы разрабатываем все проекты по методологии <a href="http://xprogramming.com/">XP</a>, активно используем принципы <a href="http://en.wikipedia.org/wiki/KISS_principle">KISS </a>и <a href="http://en.wikipedia.org/wiki/YAGNI">YAGNI</a>, поэтому каждый проект, его <a href="http://domaindrivendesign.org/">доменная модель</a> и, соответственно, база данных постоянно развиваются. С LLBLGen Pro нам приходилось генерировать модель несколько раз  в  день и, если одновременно нескольким разработчикам необходимо было что-то изменить – выстраивалась живая очередь.</div><div><br/></div><div>С генерируемым кодом очень сложно использовать <a href="http://www.testdriven.com/">TDD </a>– практически невозможно писать тест до кода. Чтобы написать тест необходимо проделать следующие шаги:  добавить таблицу/поле/ограничение в базу; сгенерировать модель и только затем написать тест – это уже не TDD.</div><div><br/></div><div>NHibernate, напротив, позволяет применять TDD в полной мере: благодаря тому, что информацию о способе отображения хранит не сама сущность, а некий внешний объект мы можем отдельно разрабатывать доменную модель и отдельно способ ее отображения. При этом сама собой возникает большая гибкость отображения.</div><div><br/></div><div>Сгенерированный код очень трудно <a href="http://www.refactoring.com/">рефакторить</a>: нельзя просто переименовать сущность/поле/связь – необходимо сначала произвести переименование в проекте, потом в генераторе и затем заново сгенерировать модель.</div><div><br/></div><div>NHibernate, же, позволяет переименовывать сущности как вам угодно прямо в Visual Studio (при условии, что для конфигурирования отображения используется <a href="http://fluentnhibernate.org/">fluent-nh</a>) – необходимо будет только удостовериться, что рефакторинг произошел безболезненно – запустить тесты (а у вас ведь они есть ;-)).</div><div><br/></div><div>В LLBLGen Pro все таблицы базы данных отражаются в сущности доменной модели, практически один к одному. </div><div><br/></div><div>Нет поддержки Value Object – т.е. невозможно из одной сущности выделить небольшие однообразные объекты, невозможно использовать связанную таблицу как Value Object. </div><div><br/></div><div>Для отображения связи сущностей m:n используются также вспомогательные сущности, при этом сами коллекции m:n всегда прибывают в состоянии «только чтение»: чтобы добавить или удалить связанную сущность необходимо работать с коллекциями вспомогательных сущностей. </div><div><br/></div><div>Нет поддержки каскадного удаления связанных сущностей – все необходимо делать руками.</div><div><br/></div><div>NHibernate лишен всех этих недостатков.</div><div><br/></div><div><h3>Вместо заключения</h3></div><div><br/></div><div>Ваш выбор LLBLGen если: </div><div><ul><li>вам нужен очень быстрый старт и проект в дальнейшем не планирует своего развития либо поддержки;</li><li>вы разрабатываете проект с использованием тяжеловесных методик типа RUP и всяких там MSF, где вся система заранее детально проработана. </li></ul></div><div>Ваш выбор NHibernate если:</div><div><ul><li>ваша система находится в непрерывном развитии и вам необходима большая гибкость на уровне ORM</li></ul><div>PS: всех с Новым годом ;-)</div></div><div class="blogger-post-footer"><img width="1" height="1" src="https://blogger.googleusercontent.com/tracker/1624027437398699573-4089624053628404827?l=hazzik.blogspot.com" alt=""/></div>
