---
layout: post
title: Web.Requre - client script dependency framework
date: '2011-10-09T22:46:00+13:00'
tags: []
tumblr_url: http://blog.hazzik.ru/post/19465325734/web-requre-client-script-dependency-framework
redirect_from:
- /post/19465325734/web-requre-client-script-dependency-framework/
- /post/19465325734/

---
<div dir="ltr" style="text-align: left;" trbidi="on"><div dir="ltr" style="text-align: left;" trbidi="on"><div dir="ltr" style="text-align: left;" trbidi="on"><h1>Что это?</h1><h1><span class="Apple-style-span" style="font-size: small; font-weight: normal;"><i>Web.Require</i> - небольшая библиотечка, для облегчения подключения скриптов в ваше Web-приложение.</span></h1><div><span class="Apple-style-span" style="font-size: small; font-weight: normal;"></span><br/><a name="more"></a></div><h1>Давай примеры!</h1><pre class="brush:html">&lt;head&gt;<br/>    &lt;title&gt;@ViewBag.Title&lt;/title&gt;<br/>    @Html.RequireStyleSheet(<br/>        Url.Content("~/Content/reset.css"),<br/>        Url.Content("~/Content/Site.less"),<br/>        Url.Content("~/Content/themes/base/minified/jquery.ui.all.min.css"))<br/><br/>    @Html.RequireScript(<br/>        Url.Content("~/Scripts/jquery-1.6.4.min.js"), <br/>        Url.Content("~/Scripts/jquery-ui-1.8.16.min.js"))<br/><br/>    @Html.OutputRequiredStyleSheets()<br/>    @Html.OutputRequiredScripts()<br/>&lt;/head&gt;<br/></pre><br/>Что тут происходит? Все очень просто: мы подключаем три css и два js файла. Что нам дает такой подход? Почему просто нельзя подключить скрипты в лоб?<br/><br/>Давайте представим, что какой-то контрол, например ваш кастомный диалог или, datepicker требует для своей работы отдельного скрпта? Как быть?<br/><ul style="text-align: left;"><li>Первый вариант - просто в контроле написать &lt;script src=&#8230;/&gt;. А если этот контрол на странице используется несколько раз?</li></ul><ul style="text-align: left;"><li>Второй вариант - просто включить этот скрипт в &lt;head&gt;. А если этот скрпит очень большой и прожорливый и используется не везде? </li></ul>Все очень просто: с помощью <i>Web.Require</i> совместим оба варианта и решим их проблемы: скрипт подгружается только один раз и только тогда, когда это необходимо. Например:<br/><br/></div><pre class="brush:csharp brush:html">&lt;!--DateTimePicker.cshtml--&gt;<br/>@Html.RequireScript(<br/>    Url.Content("~/Scripts/jquery-1.6.4.min.js"),<br/>    Url.Content("~/Scripts/jquery-ui-1.8.16.min.js"),<br/>    Url.Content("~/Scripts/jquery.ui.datepicker-ru.js"),<br/>    Url.Content("~/Scripts/DateTimePicker.js"))</pre>В итоге DateTimePicker.js добавиться в тэг  и наступит всеобщее счастье;)<br/><br/><h1>Как установить?</h1><div><span class="Apple-style-span" style="background-color: white; color: #333333; font-family: 'Segoe UI', Tahoma, 'Helvetica Neue', Arial, Helvetica, sans-serif; font-size: 12px; line-height: 12px;"></span><br/><div class="commandWrapper" style="background-attachment: initial; background-clip: initial; background-color: initial; background-image: -webkit-gradient(linear, 0 0, 0 100%, from(rgb(214, 214, 214)), to(rgb(80, 80, 80))); background-origin: initial; border-bottom-color: rgb(255, 255, 255); border-bottom-left-radius: 8px 8px; border-bottom-right-radius: 8px 8px; border-bottom-style: solid; border-bottom-width: 0px; border-color: initial; border-left-color: rgb(255, 255, 255); border-left-style: solid; border-left-width: 0px; border-right-color: rgb(255, 255, 255); border-right-style: solid; border-right-width: 0px; border-style: initial; border-top-color: rgb(255, 255, 255); border-top-left-radius: 8px 8px; border-top-right-radius: 8px 8px; border-top-style: solid; border-top-width: 0px; font-family: inherit; font-size: 12px; font-style: inherit; margin-bottom: 36px; margin-left: 0px; margin-right: 0px; margin-top: 36px; outline-color: initial; outline-style: initial; outline-width: 0px; padding-bottom: 4px; padding-left: 4px; padding-right: 4px; padding-top: 4px; vertical-align: baseline;"><div class="commandPrompt" style="-webkit-box-shadow: rgba(0, 0, 0, 0.59375) 6px 6px 14px inset, rgb(102, 102, 102) 1px 1px 4px; background-attachment: initial; background-clip: initial; background-color: initial; background-image: -webkit-gradient(linear, 0 0, 0 100%, from(rgb(94, 94, 94)), to(rgb(0, 0, 0))); background-origin: initial; border-bottom-color: rgb(196, 196, 196); border-bottom-left-radius: 6px 6px; border-bottom-right-radius: 6px 6px; border-bottom-style: solid; border-bottom-width: 1px; border-color: initial; border-left-color: rgb(196, 196, 196); border-left-style: solid; border-left-width: 1px; border-right-color: rgb(196, 196, 196); border-right-style: solid; border-right-width: 1px; border-style: initial; border-top-color: rgb(196, 196, 196); border-top-left-radius: 6px 6px; border-top-right-radius: 6px 6px; border-top-style: solid; border-top-width: 1px; box-shadow: rgba(0, 0, 0, 0.59375) 6px 6px 14px inset, rgb(102, 102, 102) 1px 1px 4px; font-family: inherit; font-size: 12px; font-style: inherit; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; outline-color: initial; outline-style: initial; outline-width: 0px; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px; text-shadow: rgb(0, 0, 0) 1px 1px 1px; vertical-align: baseline;"><div class="command" style="border-bottom-width: 0px; border-color: initial; border-left-width: 0px; border-right-width: 0px; border-style: initial; border-top-width: 0px; color: #e2e2e2; font-family: Consolas, 'Andale Mono WT', 'Andale Mono', 'Lucida Console', 'Lucida Sans Typewriter', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Liberation Mono', 'Nimbus Mono L', Monaco, 'Courier New', Courier, monospace; font-size: 24px; font-style: inherit; line-height: 24px; margin-bottom: 24px; margin-left: 8px; margin-right: 8px; margin-top: 24px; outline-color: initial; outline-style: initial; outline-width: 0px; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px; vertical-align: baseline;">PM&gt; Install-Package Web.Require</div><br/><div></div></div></div></div></div><h1>P.S.</h1>В будущем ожидаются следующие фишки:<br/><br/><ul style="text-align: left;"><li>Асинхронное подключение js</li><li>Конкатенация и минификация js и css + кэширование</li></ul><h1>P.P.S.</h1><div>Пример использования можно посмотреть <a href="https://github.com/hazzik/beerconf-website/">здесь</a></div></div><div class="blogger-post-footer"><img width="1" height="1" src="https://blogger.googleusercontent.com/tracker/1624027437398699573-3477034535813804388?l=hazzik.blogspot.com" alt=""/></div>
